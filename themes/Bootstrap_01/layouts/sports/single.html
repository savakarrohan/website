{{ define "main" }}
<div class="container blog-post">
    {{ $image := .Resources.GetMatch "tot*"}}
    {{ $imageFit := $image.Fill "1400x600 Bottom"}}
    <div class="TopPost rounded"
        style='background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url({{$imageFit.RelPermalink}});'>
        <div class="p-4 p-md-5 mb-4 mt-4 text-white opacity-100 rounded ">
            <div class="col-md-6 px-0 ">
                <h1 class="display-1 fst-italic">{{ .Params.title }}</h1>
                <p>{{.Params.author}}</p>
                <p class="lead my-3">{{ .Params.attention }}</p>
                <p class="lead mb-0"><a href="#" class="text-white fw-bold">Continue reading...</a></p>
            </div>
        </div>
    </div>
    <div class="row g-5">
        <div class="col-md-8">
            <h4 class="pb-4 mb-4 fst-italic border-bottom">
                {{ .Params.inspiration}}
            </h4>
            <h1 class="blog-post-title">{{.Params.title}}</h1>
            <p class="blog-post-meta fst-italic text-black-50">{{ .Date.Format "January 2, 2006" }} reading time :
                {{math.Round (div (countwords .Content) 200.0) }} minutes</p>

            <article class="blog-post">
                {{ .Content }}
            </article>
        </div>

        <div class="col-md-4">
            <div class="position-sticky" style="top: 2rem;">
                <div class="p-4 mb-3 bg-light rounded">
                    <h4 class="fst-italic">Short description</h4>
                    <p class="mb-0">
                        {{ .Params.shortDescription }}
                    </p>
                </div>

                <div class="p-4">
                    <h4 class="fst-italic">Tags</h4>
                    <ol class="list-unstyled mb-0">
                        {{ range .Params.tags }}
                        <a class="tag" href="/website/tags/{{ . | urlize }}">{{ . }}</a>
                        {{ end }}
                    </ol>
                </div>

                <div class="p-4">
                    <h4 class="fst-italic">Further reading</h4>
                    <ol class="list-group list-group-numbered text-break">
                        {{ range .Params._links }}
                        <li class=" list-group-item">
                            <a class="tag" href="{{ . }}">{{ . }}</a>
                        </li>
                        {{ end }}
                    </ol>
                </div>
            </div>
        </div>
    </div>
    {{/* Container for bottom row cards */}}
    <div class="container">
        <div class="row d-flex justify-content-between">
            {{/* with statement for the previous sectional post link */}}
            {{ with .PrevInSection}}
            <div class="card mb-3 col-md-5">
                <div class="row g-0">
                    <div class="col-md-4 bg-black rounded-3">
                        {{ $image := .Resources.GetMatch "tot*"}}
                        {{ $image := $image.Fill "500x900 Bottom"}}
                        <img src="{{$image.RelPermalink}}" class="img-fluid rounded-start" alt="...">
                    </div>
                    <div class="col-md-8">
                        <div class="card-body">
                            <h5 class="card-title">{{ .Title}}</h5>
                            <p class="card-text">{{ .Params.attention}}</p>
                            <a href="{{ .Permalink}}" class="btn btn-primary stretched-link">Go somewhere</a>
                            <p class="card-text"><small class="text-muted">reading time :
                                    {{math.Round (div (countwords .Content) 200.0) }} minutes</small></p>

                        </div>
                    </div>
                </div>
            </div>
            {{ end }}
            {{ with .NextInSection}}
            <div class="card mb-3 col-md-5">
                <div class="row g-0">
                    <div class="col-md-4 bg-black rounded-3">
                        {{ $image := .Resources.GetMatch "tot*"}}
                        {{ $image := $image.Fill "500x900 Bottom"}}
                        <img src="{{$image.RelPermalink}}" class="img-fluid rounded-start" alt="...">
                    </div>
                    <div class="col-md-8">
                        <div class="card-body">
                            <h5 class="card-title">{{.Title}} hey</h5>
                            <p class="card-text">{{ .Params.attention}}</p>
                            <a href="{{ .Permalink}}" class="btn btn-primary stretched-link">Go somewhere</a>
                            <p class="card-text"><small class="text-muted">reading time :
                                    {{math.Round (div (countwords .Content) 200.0) }} minutes</small></p>
                        </div>
                    </div>
                </div>
            </div>
            {{ end }}
        </div>
    </div>
</div>
{{ end }}